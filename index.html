<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parametric Project Box</title>
    <link rel="icon" href="./favicon.svg?v=32" type="image/svg+xml" />
    <link rel="stylesheet" href="./styles.css?v=32" />
  </head>
  <body>
    <header class="topbar">
      <h1>Parametric Project Box</h1>
      <p>Generate printable body/lid STL files for small electronics enclosures.</p>
    </header>

    <main class="layout">
      <aside class="panel" aria-label="Parameters panel">
        <form id="params-form">
          <section>
            <h2>Outer Dimensions (mm)</h2>
            <label>Length <input type="number" name="length" step="0.1" min="40" max="300" value="95" /></label>
            <label>Width <input type="number" name="width" step="0.1" min="30" max="300" value="65" /></label>
            <label>Height <input type="number" name="height" step="0.1" min="20" max="150" value="32" /></label>
            <label>Wall thickness <input type="number" name="wallThickness" step="0.1" min="1" max="8" value="2" /></label>
            <label>Floor thickness <input type="number" name="floorThickness" step="0.1" min="1.2" max="8" value="2.4" /></label>
            <label>Lid thickness <input type="number" name="lidThickness" step="0.1" min="1" max="8" value="2" /></label>
            <label>Corner radius <input type="number" name="cornerRadius" step="0.1" min="0" max="30" value="3" /></label>
            <div class="derived" id="inner-summary" aria-live="polite">
              <div class="summary-label">Internal cavity:</div>
              <strong id="inner-dims">-</strong>
              <div class="summary-label">Between corner posts:</div>
              <strong id="inner-dims-posts">-</strong>
            </div>
            <label class="inline-check">
              <input type="checkbox" name="showDimensions" />
              Show inner cavity dimensions
            </label>
          </section>

          <section>
            <h2>Lid fit (mm)</h2>
            <label>Lip height <input type="number" name="lipHeight" step="0.1" min="1" max="20" value="3" /></label>
            <label>Fit tolerance <input type="number" name="fitTolerance" step="0.01" min="0.1" max="0.6" value="0.25" /></label>
          </section>

          <details class="advanced-group">
            <summary>Advanced: Fasteners</summary>
            <section>
              <div class="adv-block">
                <h3 class="adv-subtitle">Fastener posts</h3>
                <label>Post diameter <input type="number" name="postDiameter" step="0.1" min="3" max="15" value="8" /></label>
                <label>Screw hole diameter <input type="number" name="screwHoleDiameter" step="0.1" min="1.2" max="8" value="2.6" /></label>
                <div class="derived">Post placement: <strong>Auto-corner</strong></div>
              </div>
              <div class="adv-block">
                <h3 class="adv-subtitle">Options</h3>
                <label class="inline-check">
                  <input type="checkbox" name="countersink" />
                  Countersink lid holes
                </label>
              </div>
            </section>
          </details>

          <details class="advanced-group">
            <summary>Advanced: Standoffs</summary>
            <section>
              <div class="adv-block">
                <h3 class="adv-subtitle">Centered standoffs</h3>
                <label class="inline-check">
                  <input type="checkbox" name="enableCenteredStandoffs" />
                  Enable centered board standoffs
                </label>
                <label>Standoff height <input type="number" name="standoffHeight" step="0.1" min="2" max="60" value="6" /></label>
                <label>Standoff diameter <input type="number" name="standoffDiameter" step="0.1" min="2" max="20" value="5" /></label>
                <label>Standoff hole diameter <input type="number" name="standoffHoleDiameter" step="0.1" min="0" max="8" value="2.2" /></label>
                <label>Standoff spacing X <input type="number" name="standoffSpacingX" step="0.1" min="2" max="300" value="58" /></label>
                <label>Standoff spacing Y <input type="number" name="standoffSpacingY" step="0.1" min="2" max="300" value="23" /></label>
              </div>
            </section>
          </details>

          <details class="advanced-group">
            <summary>Advanced: Faces</summary>
            <section>
              <div class="adv-block">
                <h3 class="adv-subtitle">Enable face modification</h3>
                <label class="inline-check">
                  <input type="checkbox" name="faceEditFront" />
                  Front face
                </label>
                <label class="inline-check">
                  <input type="checkbox" name="faceEditBack" />
                  Back face
                </label>
                <label class="inline-check">
                  <input type="checkbox" name="faceEditLeft" />
                  Left face
                </label>
                <label class="inline-check">
                  <input type="checkbox" name="faceEditRight" />
                  Right face
                </label>
              </div>

              <div class="face-editor" data-face="front" hidden>
                <h3 class="adv-subtitle">Front face</h3>
                <label class="inline-check">
                  <input type="checkbox" name="ventFrontEnabled" />
                  Enable vents
                </label>
                <div class="face-vent-params" data-face="front" hidden>
                  <label>Vent count <input type="number" name="ventFrontCount" step="1" min="1" max="20" value="6" /></label>
                  <label>Vent width <input type="number" name="ventFrontWidth" step="0.1" min="1" max="8" value="1.6" /></label>
                  <label>Vent spacing <input type="number" name="ventFrontSpacing" step="0.1" min="0.8" max="8" value="1.2" /></label>
                </div>

                <label class="inline-check">
                  <input type="checkbox" name="wireFront" />
                  Enable cutout
                </label>
                <div class="face-cutout-params" data-face="front" hidden>
                  <label>
                    Cutout profile
                    <select name="wireFrontProfile">
                      <option value="rect" selected>Rectangular</option>
                      <option value="round">Round</option>
                    </select>
                  </label>
                  <div class="wire-round-geometry" data-face="front" hidden>
                    <label>Round diameter <input type="number" name="wireFrontRoundDiameter" step="0.1" min="2" max="30" value="6" /></label>
                  </div>
                  <div class="wire-rect-geometry" data-face="front">
                    <label>Rect width <input type="number" name="wireFrontRectWidth" step="0.1" min="3" max="40" value="10" /></label>
                    <label>Rect height <input type="number" name="wireFrontRectHeight" step="0.1" min="1.5" max="20" value="4" /></label>
                  </div>
                  <label>Horizontal offset <input type="number" name="wireFrontOffsetH" step="0.1" min="-150" max="150" value="0" /></label>
                  <label>Vertical offset <input type="number" name="wireFrontOffsetV" step="0.1" min="-80" max="80" value="0" /></label>
                </div>
              </div>

              <div class="face-editor" data-face="back" hidden>
                <h3 class="adv-subtitle">Back face</h3>
                <label class="inline-check">
                  <input type="checkbox" name="ventBackEnabled" />
                  Enable vents
                </label>
                <div class="face-vent-params" data-face="back" hidden>
                  <label>Vent count <input type="number" name="ventBackCount" step="1" min="1" max="20" value="6" /></label>
                  <label>Vent width <input type="number" name="ventBackWidth" step="0.1" min="1" max="8" value="1.6" /></label>
                  <label>Vent spacing <input type="number" name="ventBackSpacing" step="0.1" min="0.8" max="8" value="1.2" /></label>
                </div>

                <label class="inline-check">
                  <input type="checkbox" name="wireBack" />
                  Enable cutout
                </label>
                <div class="face-cutout-params" data-face="back" hidden>
                  <label>
                    Cutout profile
                    <select name="wireBackProfile">
                      <option value="rect" selected>Rectangular</option>
                      <option value="round">Round</option>
                    </select>
                  </label>
                  <div class="wire-round-geometry" data-face="back" hidden>
                    <label>Round diameter <input type="number" name="wireBackRoundDiameter" step="0.1" min="2" max="30" value="6" /></label>
                  </div>
                  <div class="wire-rect-geometry" data-face="back">
                    <label>Rect width <input type="number" name="wireBackRectWidth" step="0.1" min="3" max="40" value="10" /></label>
                    <label>Rect height <input type="number" name="wireBackRectHeight" step="0.1" min="1.5" max="20" value="4" /></label>
                  </div>
                  <label>Horizontal offset <input type="number" name="wireBackOffsetH" step="0.1" min="-150" max="150" value="0" /></label>
                  <label>Vertical offset <input type="number" name="wireBackOffsetV" step="0.1" min="-80" max="80" value="0" /></label>
                </div>
              </div>

              <div class="face-editor" data-face="left" hidden>
                <h3 class="adv-subtitle">Left face</h3>
                <label class="inline-check">
                  <input type="checkbox" name="ventLeftEnabled" />
                  Enable vents
                </label>
                <div class="face-vent-params" data-face="left" hidden>
                  <label>Vent count <input type="number" name="ventLeftCount" step="1" min="1" max="20" value="6" /></label>
                  <label>Vent width <input type="number" name="ventLeftWidth" step="0.1" min="1" max="8" value="1.6" /></label>
                  <label>Vent spacing <input type="number" name="ventLeftSpacing" step="0.1" min="0.8" max="8" value="1.2" /></label>
                </div>

                <label class="inline-check">
                  <input type="checkbox" name="wireLeft" />
                  Enable cutout
                </label>
                <div class="face-cutout-params" data-face="left" hidden>
                  <label>
                    Cutout profile
                    <select name="wireLeftProfile">
                      <option value="rect" selected>Rectangular</option>
                      <option value="round">Round</option>
                    </select>
                  </label>
                  <div class="wire-round-geometry" data-face="left" hidden>
                    <label>Round diameter <input type="number" name="wireLeftRoundDiameter" step="0.1" min="2" max="30" value="6" /></label>
                  </div>
                  <div class="wire-rect-geometry" data-face="left">
                    <label>Rect width <input type="number" name="wireLeftRectWidth" step="0.1" min="3" max="40" value="10" /></label>
                    <label>Rect height <input type="number" name="wireLeftRectHeight" step="0.1" min="1.5" max="20" value="4" /></label>
                  </div>
                  <label>Horizontal offset <input type="number" name="wireLeftOffsetH" step="0.1" min="-150" max="150" value="0" /></label>
                  <label>Vertical offset <input type="number" name="wireLeftOffsetV" step="0.1" min="-80" max="80" value="0" /></label>
                </div>
              </div>

              <div class="face-editor" data-face="right" hidden>
                <h3 class="adv-subtitle">Right face</h3>
                <label class="inline-check">
                  <input type="checkbox" name="ventRightEnabled" />
                  Enable vents
                </label>
                <div class="face-vent-params" data-face="right" hidden>
                  <label>Vent count <input type="number" name="ventRightCount" step="1" min="1" max="20" value="6" /></label>
                  <label>Vent width <input type="number" name="ventRightWidth" step="0.1" min="1" max="8" value="1.6" /></label>
                  <label>Vent spacing <input type="number" name="ventRightSpacing" step="0.1" min="0.8" max="8" value="1.2" /></label>
                </div>

                <label class="inline-check">
                  <input type="checkbox" name="wireRight" />
                  Enable cutout
                </label>
                <div class="face-cutout-params" data-face="right" hidden>
                  <label>
                    Cutout profile
                    <select name="wireRightProfile">
                      <option value="rect" selected>Rectangular</option>
                      <option value="round">Round</option>
                    </select>
                  </label>
                  <div class="wire-round-geometry" data-face="right" hidden>
                    <label>Round diameter <input type="number" name="wireRightRoundDiameter" step="0.1" min="2" max="30" value="6" /></label>
                  </div>
                  <div class="wire-rect-geometry" data-face="right">
                    <label>Rect width <input type="number" name="wireRightRectWidth" step="0.1" min="3" max="40" value="10" /></label>
                    <label>Rect height <input type="number" name="wireRightRectHeight" step="0.1" min="1.5" max="20" value="4" /></label>
                  </div>
                  <label>Horizontal offset <input type="number" name="wireRightOffsetH" step="0.1" min="-150" max="150" value="0" /></label>
                  <label>Vertical offset <input type="number" name="wireRightOffsetV" step="0.1" min="-80" max="80" value="0" /></label>
                </div>
              </div>
            </section>
          </details>

        </form>

        <section>
          <h2>Status</h2>
          <div id="status" aria-live="polite">Ready.</div>
          <ul id="errors"></ul>
        </section>

        <section>
          <h2>Export</h2>
          <div class="primary-row">
            <button id="export-all" type="button">Download STL (Body + Lid)</button>
          </div>
          <div class="button-row">
            <button id="export-body" type="button">Body Only</button>
            <button id="export-lid" type="button">Lid Only</button>
          </div>
        </section>

        <section>
          <h2>Presets</h2>
          <div class="preset-row">
            <input id="preset-name" type="text" placeholder="Preset name" maxlength="40" />
            <button id="save-preset" type="button">Save</button>
          </div>
          <div class="preset-row">
            <select id="preset-select" aria-label="Preset selector"></select>
            <button id="load-preset" type="button">Load</button>
            <button id="delete-preset" type="button">Delete</button>
          </div>
        </section>
      </aside>

      <section class="viewer-wrap" aria-label="3D preview">
        <div id="viewer"></div>
        <div id="viewer-overlay" hidden>
          <strong>Model invalid</strong>
          <span id="viewer-overlay-detail">Fix highlighted settings to continue preview updates.</span>
        </div>
      </section>
    </main>

    <script type="module" src="./src/main.js?v=32"></script>
  </body>
</html>
